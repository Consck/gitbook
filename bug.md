> 吃一堑长一智，每一次故障都是人生经验
# sentinel限流失败

时间：2020年6月

事件：数据总线使用限流，上线前测试完成，但对限流知识了解不够。服务上线后发现限流配置参数未起作用，使得服务在高峰期时无法承载。

原因：并未对规则参数做到了然于心。没有完全吃透sentinel限流。因此我决定认真搞一搞限流核心。

教训：遇到新的知识，一定要吃透!

# 线程池使用不当

时间：2020年11月

事件：代码开发完成后请求测试，仅验证功能没发现问题。服务上线三天后发生线程阻塞，导致CPU无法处理新的请求。

原因：写完代码没有考虑到高峰期请求量过大的问题，上线前没有压测。在接口请求量比较大的时候没有考虑做一个代码开关，无法做到出现问题及时控制。并且线程池配置参数较小，不足以支撑高峰期请求量。

教训：上线前要考虑全面，包括功能和承受力！遇到不确定的情况时，做一个开关，能及时止损！